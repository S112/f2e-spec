(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{386:function(t,a,e){"use strict";e.r(a);var s=e(19),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"_10月份问题总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10月份问题总结"}},[t._v("#")]),t._v(" 10月份问题总结")]),t._v(" "),e("h4",{attrs:{id:"_1-vue-cli环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-vue-cli环境变量"}},[t._v("#")]),t._v(" 1. Vue CLI环境变量")]),t._v(" "),e("p",[t._v("使用"),e("strong",[t._v("Vue CLI")]),t._v("构建工具开发，添加/修改环境变量，只有"),e("strong",[t._v("NODE_ENV")]),t._v("、"),e("strong",[t._v("BASE_URL")]),t._v("、"),e("strong",[t._v("VUE_APP")]),t._v(" 开头的变量才能被webpack.DefinePlugin插件识别。"),e("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/mode-and-env.html?#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网说明 - 环境变量"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("推荐（.env.development）")]),t._v(" "),e("div",{staticClass:"language-vue extra-class"},[e("pre",{pre:!0,attrs:{class:"language-vue"}},[e("code",[t._v("NODE_ENV = 'development'\nVUE_APP_HNM_API = '/gw/hnm/shop/api/v1'\nVUE_APP_EMP_API = '/gw/emp/hx'\nVUE_APP_RQK_API = '/gw/rqk/internal/api/v1'\n")])])])]),t._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[t._v("不推荐（.env.development）")]),t._v(" "),e("div",{staticClass:"language-vue .env.development extra-class"},[e("pre",{pre:!0,attrs:{class:"language-vue"}},[e("code",[t._v("BASE_API: '\"http://ac-dev.u.haiersmarthomes.com/\"'\nRED_URL: '\"https://testwallet.haier.net/userwallet\"'\nSHARE_URL: '\"http://ah-h5-dev.u.haiersmarthomes.com/hot/sharePage\"'\n")])])])]),t._v(" "),e("h4",{attrs:{id:"_2-git识别文件大小写"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-git识别文件大小写"}},[t._v("#")]),t._v(" 2. git识别文件大小写")]),t._v(" "),e("ul",[e("li",[t._v("(1) 开启 git大小写识别"),e("br"),t._v(" "),e("code",[t._v("git config --global core.ignorecase false")])]),t._v(" "),e("li",[t._v("(2) 清理缓存\n"),e("code",[t._v("git rm --cached 文件名")]),e("br"),t._v("\n以数据大屏项目 component目录下的dataHead.vue 文件为例"),e("br"),t._v(" "),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/1.webp",alt:""}}),t._v("\n本地终端："),e("br"),t._v("\ngit config --global core.ignorecase false"),e("br"),t._v("\ngit rm --cached src/views/dataDisplay/component/dataHead.vue"),e("br"),t._v(" "),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/2.webp",alt:""}}),t._v("\ngit add .\ngit status\n"),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/3.webp",alt:""}})])]),t._v(" "),e("h4",{attrs:{id:"_3-xhaier平台前端打包发版出错排查"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-xhaier平台前端打包发版出错排查"}},[t._v("#")]),t._v(" 3. xhaier平台前端打包发版出错排查")]),t._v(" "),e("p",[t._v("发布测试环境，结果控制台打印出 production"),e("br"),t._v(" "),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/10.webp",alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("(1) "),e("a",{attrs:{href:"https://x.haier.net/console/",target:"_blank",rel:"noopener noreferrer"}},[t._v("登录xhaier平台"),e("OutboundLink")],1),t._v("，查看文件存放地址\n"),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/4.webp",alt:""}})]),t._v(" "),e("li",[t._v("(2) 选择应用\n"),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/5.webp",alt:""}})]),t._v(" "),e("li",[t._v("(3) 查看前端打包好的文件\n"),e("code",[t._v("cat /usr/share/nginx/html/jshst/index.html")]),t._v(" "),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/6.webp",alt:""}})]),t._v(" "),e("li",[t._v("(4) 查看ngnix配置"),e("br"),t._v(" "),e("code",[t._v("cat /etc/nginx/conf.d/nginx.conf")]),t._v(" "),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/7.webp",alt:""}})]),t._v(" "),e("li",[t._v("(5) 检查关联是否正确")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("关联正确")]),t._v(" "),e("p",[e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/8.webp",alt:""}})])]),t._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[t._v("关联错误")]),t._v(" "),e("p",[e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/9.webp",alt:""}})])]),t._v(" "),e("h4",{attrs:{id:"_4-static目录中的文件加载报404"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-static目录中的文件加载报404"}},[t._v("#")]),t._v(" 4. static目录中的文件加载报404")]),t._v(" "),e("p",[t._v("活动项目静态资源（音频、图片），放到static目录中，线上访问报404。\n"),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/11.webp",alt:""}}),t._v("\nip "),e("strong",[t._v("123.57.50.123")]),t._v(" 所对应的域名是 "),e("strong",[t._v("fb-h5-dev.u.haiersmarthomes.com/tiger")]),t._v("，部署测试环境或生产环境，需要在nginx.conf文件中进行配置")]),t._v(" "),e("div",{staticClass:"language-nginx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tiger"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("audio"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("win"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mp3 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("alias")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tiger"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("static"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("audio"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("win"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mp3"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("static"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("audio"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("win"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mp3 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不加tiger会报404")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("alias")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tiger"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("static"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("audio"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("win"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mp3"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("本地开发调试的时候，是 "),e("strong",[t._v("http://0.0.0.0:8081/")]),t._v(" 为根目录的，引入的时候所需要先判断环境。")]),t._v(" "),e("div",{staticClass:"language-vue extra-class"},[e("pre",{pre:!0,attrs:{class:"language-vue"}},[e("code",[t._v("// 当前是否为开发环境\nwindow._isDev = process.env.NODE_ENV === 'local';\nplayAudio: new Audio(window._isDev ? '/static/audio/play.mp3' : '/tiger/audio/play.mp3');\n")])])]),e("h3",{attrs:{id:"_5-github加速插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-github加速插件"}},[t._v("#")]),t._v(" 5. GitHub加速插件")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://pan.baidu.com/s/1qGiIUzqNlN1ZczTNFbPg0A",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载地址:"),e("OutboundLink")],1),e("br"),t._v("\n提取码：stsv"),e("br"),t._v("\n安装完成后，github上会显示加速通道\n"),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/12.webp",alt:""}}),t._v("\n本地git执行 "),e("code",[t._v("git config --global http.sslVerify false")]),t._v("，可以使用加速的链接克隆工程了。")]),t._v(" "),e("h3",{attrs:{id:"_6-cors-private跨域问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-cors-private跨域问题"}},[t._v("#")]),t._v(" 6. CORS private跨域问题")]),t._v(" "),e("p",[t._v("统一运营平台下的数据开放平台测试环境，遇到了跨域问题，\n"),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/13.webp",alt:""}}),t._v("\n版本是94或以上的chrome浏览器遇到了跨域问题，Safari、火狐浏览器是正常的。"),e("br"),t._v(" "),e("strong",[t._v("secure context and the resource is in more-private address space private.")]),e("br"),t._v("\n外网http://uop-web-dev.u.haiersmarthomes.com/ 访问了内网http://dop-pre.qd-aliyun-internal2.haier.net/index.html的文件，浏览器做了限制。"),e("br"),t._v("\n解决：")]),t._v(" "),e("ul",[e("li",[t._v("方式一：将两者的协议由http升级为https；")]),t._v(" "),e("li",[t._v("方式二：两者资源都改成内网或者外网ip（推荐）；")]),t._v(" "),e("li",[t._v("方式三：浏览器设置，chrome://flags/#block-insecure-private-network-requests，设置为disabled。")])]),t._v(" "),e("h3",{attrs:{id:"_7-数据大屏gio埋点丢失"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-数据大屏gio埋点丢失"}},[t._v("#")]),t._v(" 7. 数据大屏gio埋点丢失")]),t._v(" "),e("p",[t._v("轮询发送埋点事件时，时间间隔需要设定在"),e("strong",[t._v("5s或5s以上")]),t._v("，间隔太短或频繁发送，会造成埋点数据丢失，统计有误。\n对于轮询的埋点，通过setInterval方法，或者通过节流函数（throttling）处理。"),e("br"),t._v("\n以统计页面停留时长为例：")]),t._v(" "),e("div",{staticClass:"language-vue extra-class"},[e("pre",{pre:!0,attrs:{class:"language-vue"}},[e("code",[t._v("mounted() {\n    this.timer = setInterval(this.timeStay, 15000); // 每间隔15秒埋一次\n},\nmethods: {\n    timeStay () {\n        let params = JSON.parse(JSON.stringify(this.$store.state.user.mapList));\n        if (this.userRole === 'zongbu') { // 记录总部\n          params.timeStay = this.fixedNum_quanguo;\n          window.gio('track', 'HW00013', params);\n        } else if (this.userRole === 'xiaowei') { // 记录小微\n          params.timeStay = this.fixedNum_xiaowei;\n          window.gio('track', 'HW00014', params);\n        }\n   }\n}\n")])])]),e("p",[t._v("在gio看板上，查看埋点数，乘以15s算出停留时长。"),e("br"),t._v(" "),e("img",{attrs:{src:"/f2e-spec/images/summary/december_2021/14.webp",alt:""}})])])}),[],!1,null,null,null);a.default=r.exports}}]);